<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Snapsave.cfd – Tải video TikTok không logo</title>
  <meta name="description" content="Dán link TikTok để tải video không logo, tốc độ nhanh, miễn phí." />
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="header">
    <div class="brand">
      <span class="logo">⬇️</span>
      <h1>Snapsave <b>cfd</b></h1>
    </div>
    <button class="menu" aria-label="Open menu">☰</button>
  </header>

  <aside id="sidebar" class="sidebar">
    <nav>
      <a href="/">Trang chủ</a>
      <a href="#faq">Hỏi đáp</a>
      <a href="mailto:singerkaseem@gmail.com">Liên hệ</a>
    </nav>
  </aside>
  <div id="overlay" class="overlay"></div>

  <main class="container">
    <section class="hero">
      <h2>Tải video TikTok không logo</h2>
      <p>Dán link TikTok vào ô dưới và bấm <b>Tải</b>. Không cần cài app.</p>

      <div id="error-inline" class="alert" style="display:none;">
        <span id="error-inline-msg"></span>
      </div>

      <form id="download-form" class="form">
        <input id="hf_urli" type="url" inputmode="url" placeholder="https://www.tiktok.com/@user/video/123..." autocomplete="off" />
        <button id="submit" type="submit">Tải</button>
      </form>

   <form id="download-form" class="form">
        <div class="container">
            <h2>Download TikTok Video</h2>
            <form id="downloadForm">
                <input type="url" id="tiktokUrl" placeholder="Paste TikTok link here..." required>
                <button type="submit">Download</button>
            </form>
            <div id="resultBox"></div>
        </div>
    </section>
</form>

      <div id="meta" class="meta" style="display:none;">
        <img id="thumb" alt="thumbnail" />
        <div>
          <h3 id="desc"></h3>
          <p id="author"></p>
        </div>
      </div>

      <div id="result" class="result"></div>

      <div class="samples">
        <p>Ví dụ:</p>
        <button class="sample" data-url="https://www.tiktok.com/@scout2015/video/6718335390845095173">Link mẫu 1</button>
        <button class="sample" data-url="https://vm.tiktok.com/ZM2xYxxx/">Link rút gọn</button>
      </div>
    </section>

   
    <section id="faq" class="faq">
      <h2>Hỏi đáp</h2>
      <div class="faq-item">
        <button class="faq-question">Tại sao tải chậm?</button>
        <div class="faq-answer">
          Tụi mình parse trực tiếp TikTok, không qua trung gian và có cache 10 phút, nên thường hiển thị tức thì. Nếu link mới, lần đầu có thể mất 1–2 giây.
        </div>
      </div>
      <div class="faq-item">
        <button class="faq-question">Có miễn phí không?</button>
        <div class="faq-answer">Có. Bạn có thể dùng thoải mái.</div>
      </div>
    </section>
  </main>

  <footer class="footer">
    © <span id="y"></span> Snapsave.cfd — Không liên kết với TikTok.
  </footer>

   <footer>

  <script>
    document.getElementById("downloadForm").addEventListener("submit", function(e) {
      e.preventDefault();
      download();
    });


async function forceDownload(url, filename) {
      try {
        const response = await fetch(url);
        const blob = await response.blob();
        const blobUrl = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = blobUrl;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(blobUrl);
      } catch (err) {
        alert("❌ Unable to load video: " + err.message);
      }
    }

    async function download() {
      const url = document.getElementById("tiktokUrl").value.trim();
      const resultBox = document.getElementById("resultBox");
      if (!url) return alert("Please enter TikTok link.");
      resultBox.innerHTML = "⏳ Đang xử lý...";

      try {
        const res = await fetch("https://www.snaptok.us/api/Snaptik", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ url })
        });
        const data = await res.json();
        if (data.code === 0 && data.data.length > 0) {
          const meta = data.meta || {};
          resultBox.innerHTML = `
            ${meta.thumbnail ? `<img src="${meta.thumbnail}" alt="Thumbnail" class="thumbnail" />` : ""}
            ${meta.author ? `<div class="author">@${meta.author}</div>` : ""}
            ${meta.description ? `<div class="desc">${meta.description}</div>` : ""}
            ${data.data.map((item, index) => `
              <button class="button-go" onclick="forceDownload('${item.url}', 'video-${index + 1}.mp4')">⬇️ ${item.label}</button>
            `).join('')}
          `;
        } else {
          resultBox.innerHTML = "❌ Không lấy được link. Vui lòng thử lại.";
        }
      } catch (err) {
        console.error("⚠️ Lỗi fetch:", err);
        resultBox.innerHTML = "⚠️ Lỗi kết nối đến API.";
      }
    }
  </script>

  <script src="main.js"></script>
</body>
</html>